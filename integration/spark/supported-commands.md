# Supported Commands

The page lists Spark commands which are supported by OpenLineage.

| Command                                 | Output visitor support | Example SQL / Notes                                                                                                |
|-----------------------------------------|------------------------|--------------------------------------------------------------------------------------------------------------------|
| AlterTableAddColumnsCommand             | &check;                | `ALTER TABLE t ADD COLUMNS (a string, b string)`                                                                   |
| AlterTableRenameCommand                 | &check;                | `ALTER TABLE t1 RENAME TO t2`                                                                                      |
| AppendData                              | &check;                |                                                                                                                    |                                                                                                                                                                                                                                                                                                |
| CreateHiveTableAsSelectCommand          | &check;                | `CREATE TABLE t USING hive LOCATION '...' `<br/>`AS SELECT a, b FROM temp`                                         |
| InsertIntoDataSourceDirCommand          | &check;                | `INSERT OVERWRITE DIRECTORY '...' USING PARQUET SELECT * from t`                                                   |
| InsertIntoHiveDirCommand                | &check;                | `INSERT OVERWRITE DIRECTORY '...' SELECT * from t`                                                                 |
| InsertIntoHiveTable                     | &check;                | `INSERT INTO t1 SELECT * from t2` <br/>when table created with `using HIVE`                                        |
| OptimizedCreateHiveTableAsSelectCommand | &check;                | `CREATE TABLE t STORED AS PARQUET LOCATION '...' `<br/>`AS SELECT a, b FROM temp`                                  |
| AlterTableChangeColumnCommand           | &cross;                | irrelevant as only column comment changes are allowed in Spark                                                     |
| AlterTableAddPartitionCommand           | &check;                | `ALTER TABLE t ADD IF NOT EXISTS PARTITION (a='b')`. <br/> Generated datasets exclude partition and location info. |
| AlterTableRenamePartitionCommand        | &cross;                | not implemented                                                                                                    |
| AlterTableDropPartitionCommand          | &cross;                | not implemented                                                                                                    |
| AlterTableRecoverPartitionsCommand      | &cross;                | not implemented                                                                                                    |
| AlterTableSetLocationCommand            | &check;                | `ALTER TABLE t SET LOCATION '...'`. <br/> Generated datasets exclude partition and location info.                  |
| Generate                                | &cross;                |                                                                                                                    |
| ReturnAnswer                            | &cross;                |                                                                                                                    |
| SaveAsHiveFile                          | &cross;                |                                                                                                                    |


## V2 commands 

Spark commands to integrate with external catalogs like `iceberg`, `delta`, etc.

| Command                    | Output visitor support | Example SQL / Notes                                                                                                                                                                                                                                                                                                                         |
|----------------------------|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AlterTable                 | &check;                | `ALTER TABLE local.db.t RENAME COLUMN a TO b`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                   |
| AppendData                 | &check;                | `INSERT INTO local.db.t1 SELECT * from t2`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                      |
| CreateTableAsSelect        | &check;                | `CREATE TABLE local.db.t USING iceberg AS SELECT * FROM temp`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                   |
| DeleteFromTable            | &check;                | `DELETE FROM local.db.t WHERE a=1`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                              |
| DropTable                  | &check;                | `DROP TABLE local.db.t`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                                         |
| MergeIntoTable             | &check;                | `MERGE INTO local.db.events USING local.db.updates`<br/>`ON local.db.events.event_id = local.db.updates.event_id`<br/>`WHEN MATCHED THEN UPDATE SET local.db.events.last_updated_at = local.db.updates.updated_at`<br/>`WHEN NOT MATCHED THEN INSERT (event_id, last_updated_at) VALUES (event_id, updated_at)`<br/>(tested with *iceberg*) |
| OverwriteByExpression      | &check;                | `INSERT OVERWRITE local.db.t VALUES (...),(...)`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                |
| OverwritePartitionsDynamic | &check;                | `INSERT OVERWRITE TABLE local.db.t PARTITION(c) SELECT * FROM temp`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                             |
| RenameTable                | &check;                | `ALTER TABLE local.db.t RENAME COLUMN a TO b`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                   |
| ReplaceTableAsSelect       | &check;                | `REPLACE TABLE t (a string, b string) USING delta LOCATION '...'`<br/>(tested with *delta*)                                                                                                                                                                                                                                                 |
| UpdateTable                | &check;                | `UPDATE local.db.t SET a=1 WHERE b=1`<br/>(tested with *iceberg*)                                                                                                                                                                                                                                                                           |
| AlterTableAddPartition     | &cross;                | not implemented in *iceberg* nor *delta*                                                                                                                                                                                                                                                                                                    |
| AlterTableDropPartition    | &cross;                | not implemented in *iceberg* nor *delta*                                                                                                                                                                                                                                                                                                    |
| NoopDropTable              | &cross;                | no data operation performed                                                                                                                                                                                                                                                                                                                 |
| TruncateTable              | &cross;                | not implemented in *iceberg* nor *delta*                                                                                                                                                                                                                                                                                                    |



