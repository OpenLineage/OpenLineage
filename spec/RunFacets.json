{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://openlineage.io/spec/1-0-0/RunFacets.json",
    "$defs": {
        "NominalTimeRunFacet": {
            "allOf": [
                {
                    "$ref": "OpenLineage.json#/$defs/RunFacet"
                },
                {
                    "type": "object",
                    "properties": {
                        "nominalStartTime": {
                            "description": "An [ISO-8601](https://en.wikipedia.org/wiki/ISO_8601) timestamp representing the nominal start time (included) of the run. AKA the schedule time",
                            "type": "string",
                            "format": "date-time",
                            "example": "2020-12-17T03:00:00.000Z"
                        },
                        "nominalEndTime": {
                            "description": "An [ISO-8601](https://en.wikipedia.org/wiki/ISO_8601) timestamp representing the nominal end time (excluded) of the run. (Should be the nominal start time of the next run)",
                            "type": "string",
                            "format": "date-time",
                            "example": "2020-12-17T04:00:00.000Z"
                        }
                    },
                    "required": [
                        "nominalStartTime"
                    ]
                }
            ],
            "type": "object"
        },
        "ParentRunFacet": {
            "description": "the id of the parent run and job, iff this run was spawn from an other run (for example, the Dag run scheduling its tasks)",
            "allOf": [
                {
                    "$ref": "OpenLineage.json#/$defs/RunFacet"
                },
                {
                    "type": "object",
                    "properties": {
                        "run": {
                            "type": "object",
                            "properties": {
                                "runId": {
                                    "description": "The globally unique ID of the run associated with the job.",
                                    "type": "string",
                                    "format": "uuid"
                                }
                            },
                            "required": [
                                "runId"
                            ]
                        },
                        "job": {
                            "type": "object",
                            "properties": {
                                "namespace": {
                                    "description": "The namespace containing that job",
                                    "type": "string",
                                    "example": "my-scheduler-namespace"
                                },
                                "name": {
                                    "description": "The unique name for that job within that namespace",
                                    "type": "string",
                                    "example": "myjob.mytask"
                                }
                            },
                            "required": [
                                "namespace",
                                "name"
                            ]
                        }
                    },
                    "required": [
                        "run",
                        "job"
                    ]
                }
            ],
            "type": "object"
        }
    },
    "type": "object",
    "properties" : {
        "nominalTime": {
            "$ref": "#/$defs/NominalTimeRunFacet"
        },
        "parent": {
            "$ref": "#/$defs/ParentRunFacet"
        }
    }
}